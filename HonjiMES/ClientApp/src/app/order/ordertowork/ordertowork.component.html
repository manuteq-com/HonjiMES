
<form action="" (submit)="onFormSubmit($event)">

    <dx-data-grid [dataSource]="dataSourceDB" showBorders="true" keyExpr="Id" [focusedRowEnabled]="false"
        (onDataErrorOccurred)="onDataErrorOccurred($event)" [(autoNavigateToFocusedRow)]="autoNavigateToFocusedRow"
        (onFocusedRowChanging)="onFocusedRowChanging($event)" (onFocusedRowChanged)="onFocusedRowChanged($event)"
        (onEditorPreparing)="onEditorPreparing($event)" (onSelectionChanged)="onSelectionChanged($event)"
        (onCellClick)="cellClick($event)" hoverStateEnabled="true" [rowAlternationEnabled]="true"
        (onCellPrepared)="onCellPrepared($event)" (onRowPrepared)="onRowPrepared($event)"
        (onEditingStart)="onEditingStart($event)" [showColumnLines]="true" [showRowLines]="false"
        [remoteOperations]="remoteOperations" (onRowClick)="onRowClick($event)" [height]="630">

        <dxo-selection mode="multiple" showCheckBoxesMode="always"></dxo-selection>
        <dxo-filter-row [visible]="false"></dxo-filter-row>
        <dxo-header-filter [visible]="false"></dxo-header-filter>
        <dxo-sorting mode="multiple"></dxo-sorting>
        <dxo-grouping [autoExpandAll]="true"></dxo-grouping>
        <dxo-paging [enabled]="false">
        </dxo-paging>
        <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>

        <dxo-editing mode="cell" [allowUpdating]="true" [allowDeleting]="false" useIcons="false"></dxo-editing>

        <dxi-column dataField="Status" caption="狀態" alignment="center" [width]="120">
            <dxo-lookup [dataSource]="listStatus" displayExpr="Name" valueExpr="Id"></dxo-lookup>
        </dxi-column>
        <dxi-column dataField="WorkOrderNo" caption="預產生之工單號" sortOrder="asc" [width]="160"></dxi-column>
        <dxi-column dataField="DataType" caption="類別" alignment="center" [allowEditing]="false" [width]="100">
            <dxo-lookup [dataSource]="DataTypeList" displayExpr="Name" valueExpr="Id"></dxo-lookup>
            <dxi-validation-rule type="required"></dxi-validation-rule>
        </dxi-column>
        <dxi-column dataField="DataNo" caption="品號"></dxi-column>
        <dxi-column dataField="DataName" caption="名稱"></dxi-column>
        <!-- <dxi-column dataField="MachineNo" caption="機號"></dxi-column> -->
        <dxi-column dataField="OrderCount" caption="訂單數量" [width]="100"></dxi-column>
        <dxi-column dataField="StockCount" caption="庫存數量" [width]="200"></dxi-column>
        <dxi-column dataField="Count" caption="工單數量" dataType="number" [width]="100" [editorOptions]="EditorOptions" [allowEditing]="true"></dxi-column>
        <!-- <dxi-column dataField="CreateTime" caption="建立日期" dataType="date" [width]="180"></dxi-column>
        <dxi-column dataField="UpdateTime" caption="更新日期" dataType="date" [width]="180"></dxi-column> -->

    </dx-data-grid>

    <div class="col-auto-12 mt-1">
        <dx-button horizontalAlignment="right" class="pl-3 pr-3 pb-1" text='取消' type='danger' icon='close' [useSubmitBehavior]="true"
            (onClick)="CancerOnClick($event)"></dx-button>
        <dx-button horizontalAlignment="right" class="pl-3 pr-3 pb-1" text='確認建立' type='success' icon='save' [useSubmitBehavior]="true"
            (onClick)="SaveOnClick($event)"></dx-button>
    </div>

</form>
